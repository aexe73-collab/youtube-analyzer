const analyzeLinks = async () => {
    const valid = links.filter(l => l.trim());
    if (valid.length === 0) {
        setError('Please enter at least one YouTube link');
        return;
    }

    setError('');
    setResults('');
    setLoading(true);

    try {
        const transcripts = [];

        for (let i = 0; i < valid.length; i++) {
            setProgress(`ðŸ“¥ Fetching transcript ${i + 1} of ${valid.length}...`);
            const videoId = extractVideoId(valid[i]);
            
            if (!videoId) {
                throw new Error(
                    `âŒ Invalid YouTube URL: ${valid[i]}\n\n` +
                    `Please use format:\n` +
                    `â€¢ https://youtube.com/watch?v=VIDEO_ID\n` +
                    `â€¢ https://youtu.be/VIDEO_ID\n` +
                    `â€¢ VIDEO_ID (11 characters)`
                );
            }
            
            try {
                const transcript = await fetchTranscript(videoId);
                transcripts.push({ 
                    url: valid[i], 
                    videoId, 
                    transcript
                });
            } catch (transcriptError) {
                throw new Error(
                    `âŒ Could not fetch transcript for video ${i + 1}\n\n` +
                    `Video: ${valid[i]}\n\n` +
                    `Possible reasons:\n` +
                    `â€¢ Video doesn't have captions/subtitles enabled\n` +
                    `â€¢ Captions are disabled by the creator\n` +
                    `â€¢ Video is age-restricted or private\n` +
                    `â€¢ Video has been deleted\n\n` +
                    `âœ… How to check if a video has captions:\n` +
                    `1. Open the video on YouTube\n` +
                    `2. Look for the CC (closed captions) button\n` +
                    `3. Click it - if captions appear, the video can be analyzed\n` +
                    `4. If there's no CC button or it says "unavailable", try a different video\n\n` +
                    `ðŸ’¡ Tip: Most professional content creators enable captions on their videos!`
                );
            }
        }

        setProgress('ðŸ¤– Analyzing with Claude AI...');

        // Build report header with video links
        const reportHeader = transcripts.map((t, i) => 
            `**Video ${i + 1}:** ${t.url}`
        ).join('\n');

        const transcriptText = transcripts.map((t, i) => 
            `VIDEO ${i + 1}: ${t.url}\n\nTRANSCRIPT:\n${t.transcript}`
        ).join('\n\n---\n\n');

        const prompt = transcripts.length === 1
            ? `You are analyzing a YouTube video. Create a professional insights report.

VIDEO ANALYZED:
${reportHeader}

---

Based on the transcript, provide:

## Key Insights
- Main concepts, strategies and lessons
- Specific examples and data points mentioned
- Unique or surprising perspectives

## Actionable Takeaways
- What viewers can implement immediately
- Step-by-step processes mentioned
- Tools or frameworks discussed

## Best Quotes
- Most impactful quotes with context

TRANSCRIPT:
${transcriptText}`
            : `You are analyzing multiple YouTube videos. Create a professional comparative insights report.

VIDEOS ANALYZED:
${reportHeader}

---

Based on the transcripts, provide:

## Consensus Views
- What all videos agree on
- Common themes and strategies

## Unique Perspectives
- What each video uniquely offers
- Contradicting viewpoints

## Comparative Analysis
- Which video excels in what areas
- How they complement each other

## Synthesized Best Practices
- Combined wisdom from all sources
- Recommended viewing order

TRANSCRIPTS:
${transcriptText}`;

        const analysis = await analyzeWithClaude(prompt);
        
        // Prepend the video links to results
        const formattedResults = `# YouTube Insights Report\n\n${reportHeader}\n\n---\n\n${analysis}`;
        setResults(formattedResults);

    } catch (err) {
        setError(err.message);
    } finally {
        setLoading(false);
        setProgress('');
    }
};
```

5. Commit

---

**This version:**
- âœ… Shows the YouTube URL at the top of the report
- âœ… No external API calls needed (just SerpAPI for transcript)
- âœ… Works immediately
- âœ… Professional report format

**Output will look like:**
```
# YouTube Insights Report

**Video 1:** https://youtube.com/watch?v=...

---

## Key Insights
[Analysis here]
